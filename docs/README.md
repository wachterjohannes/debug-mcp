# Symfony AI Mate - Local MCP Server

This is a PHP tool that creates a local MCP server to enhance your AI development assistant (JetBrains AI, Claude, GitHub
Copilot, Cursor, etc.) with Symfony-specific knowledge and tools.

This is the core package that creates and manages your MCP server. It includes some standard tools, while framework or
project-specific tools live in their own packages.

## Usage

Install with composer:

```bash
composer require symfony/ai-mate
```

Initialize configuration:

```bash
vendor/bin/mate init
```

See how to integrate with your AI tool in the [integration guide](integration.md).

## How to add features?

The easiest way is to create a `mate` folder next to your `src` and `tests` directories, then add classes with `#[McpTool]`
attributes.

Example:

```php
<?php
// mate/MyTool.php
namespace App\Mate;

use Mcp\Capability\Attribute\McpTool;

class MyTool
{
    #[McpTool(name: 'my_tool', description: 'My custom tool')]
    public function execute(string $param): array
    {
        return ['result' => $param];
    }
}
```

## Configuration

The `.mate/extensions.php` file is automatically generated by `mate init` and managed by the `mate discover` command:

```php
<?php
// .mate/extensions.php
// This file is managed by 'mate discover'
// You can manually edit to enable/disable extensions

return [
    'vendor/package-name' => ['enabled' => true],
    'vendor/another-package' => ['enabled' => false],
];
```

### Adding Third-Party Tools

1. Install the package:
   ```bash
   composer require vendor/symfony-tools
   ```

2. Discover available tools (auto-generates/updates `.mate/extensions.php`):
   ```bash
   vendor/bin/mate discover
   ```

3. Optionally disable specific extensions:
   ```php
   // .mate/extensions.php
   return [
       'vendor/symfony-tools' => ['enabled' => true],
       'vendor/unwanted-tools' => ['enabled' => false],
   ];
   ```

## Commands

### Init

Initialize `.mate/extensions.php` configuration file:

```bash
vendor/bin/mate init
```

### Run server

Start the MCP server:

```bash
vendor/bin/mate serve
```

### Discover MCP features

Find available MCP extensions and auto-generate `.mate/extensions.php`:

```bash
vendor/bin/mate discover
```

This command will:
- Scan your vendor directory for packages with `extra.ai-mate` configuration
- Generate or update `.mate/extensions.php` with discovered extensions
- Preserve existing enabled/disabled states for known extensions
- Default new extensions to enabled

### Clear cache

Clear the MCP server cache:

```bash
vendor/bin/mate clear-cache
```

## Security

For security, no vendor plugins are enabled by default. You must explicitly whitelist packages in the `enabled_plugins`
configuration.

Local `mate/` directory is always enabled for rapid development.
